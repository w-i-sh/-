首先IPB帧是用于帧间压缩，相对于帧间压缩还有一种帧内压缩。

帧内压缩：使用一定的方法使用最小的空间存储一帧数据。（可以用起始位置和结束位置以及RGB数据来描述一个色块）

![image](https://github.com/w-i-sh/blog-img/blob/main/%E6%B5%81%E5%AA%92%E4%BD%93/image%20copy%2020.png?raw=true)


# 一、码率、帧率、分辨率
帧率：FPS（每秒钟显示多少帧的画面）（frames per second）；以及Gop（表示多少个I帧）

码率：编码器每秒变出多少数据大小，单位kbps；

分辨率：单位英寸中所包含的像素点；VGA：video graphics arrary（视频图像分辨率）



对直播的影响

帧率：影响直播画面的流畅度，与画面流畅度成正比；帧率越大，画面越流畅；帧率越小，画面越有跳动感。如果码率为变量，则帧率也会影响体积，帧率越高，体积越大。帧率就是秒内传输的视频的帧数，也可以理解为图形处理每秒钟能刷新多少下

分辨率：影响图片体积大小，与图片体积大小成正比；分辨率越高，图像体积越大；分辨率越低，图片体积越小。



对图片清晰度的影响

在码率一定的情况下，分辨率与清晰度成反比，分辨率越高，清晰度越低；分辨率越低，清晰度越高。

在分辨率一定的情况下，码率与清晰度成正比，码率越高，清晰度越高。



# 二、视频编码
帧间编码技术

运动补偿：运动补偿是通过先前的局部图像来预测、补偿当前的局部图像，他是减少帧序列冗余信息的有效方法

运动表示：不同区域的图像需要使用不同的运动矢量来描述运动信息

运动估计：运动估计是从视频序列中抽取运动信息的一整套技术

帧内编码技术



![image](https://github.com/w-i-sh/blog-img/blob/main/%E6%B5%81%E5%AA%92%E4%BD%93/image%20copy%2021.png?raw=true)



IPB帧（H.264视频编码标准的一项技术）

视频压缩中每帧都代表着一幅精致的图画。而在实际进行压缩时，会采取各种算法以减少数据的容量，其中IPB帧就是最常见的一种。

I帧：帧内编码帧（intra picture），I帧一般是每个GOP（MPEG所使用的的一种视频压缩技术）的第一帧，经过适度的压缩，作为随机访问的参考点可以当成静态图像。I帧可以看做一个图像经过压缩后的产物，I帧压缩可以得到1:6的压缩比而不会产生任何可察觉的模糊现象。I帧压缩可以去掉视频空间的冗余信息。

I帧是独立编码的不依赖其他帧；在视频解码时可以单独解码和显示I帧，而不需要其他帧的参考。

P帧：前向预测编码帧（predictive-frame），通过将图像序列中前面已编码帧的时间冗余信息去充分去除压缩传输数据量的编码图像，也称为预测帧。P帧保存了与参考帧之间的差异信息（运动矢量和残差），而不是保存完整的图像信息。

B帧：双向预测编码帧（bi-directional prediction frame），考虑原图像序列前面的已编码帧，又估计原图像序列后面的已编码帧之间的时间冗余信息，来压缩传输数据量的编码图象，也称为双向预测帧。B帧的压缩效率通常比P帧更高，因为它可以参考更多的帧进行预测。B帧保存了前后帧之间的差异信息，可以利用时间和空间相关性进行更准确的预测。

__从解码的角度来看：__

I帧自身可以通过视频解压算法解压成一个单独的完整视频画面，所以I帧去掉视频帧在空间上的冗余信息

P帧需要参考前面的一个I帧或者P帧来解码成一张完整的视频画面。

B帧则需要参考前面的I帧或者P帧以及后一个P帧来生成后面一张完整的视频画面，所以P帧与B帧去掉视频在时间维度的冗余信息。

__GOP(group of picture):一系列的图像组成的组别__

I帧使用了帧内压缩，而P帧和B帧则使用了帧间压缩。

I/IDR帧，使用全帧压缩编码，将全帧的图像信息进行JPEG压缩编码。

IDR帧是一个特殊的I帧，别的帧在复原的时候可以参考I帧以及I帧前面的帧但是不能参考IDR帧前面的帧。

P帧是参考帧，可能会造成解码错误的传播，但是B帧不是参考帧，不会造成解码错误的扩散。

B帧的压缩比最高，但是相对的它的解码速度慢。

# 三、录制时长增加探究
在视频编码中，B帧的引入会增加视频序列的压缩率和编码效率，但也会引入一定的延迟。这可能导致录制的包含B帧的视频流的实际时长比源视频时长要长一些。

延迟的原因是因为B帧的解码依赖于前后帧的参考，所以在解码B帧之前，需要先解码其所依赖的前后帧。这个解码过程需要一定的时间，从而导致实际时长的增加。

录制一个包含B帧的视频流时，视频编码器会根据编码参数和视频内容生成B帧。在解码这个视频流时，视频解码器需要按顺序解码每个帧，并且在解码B帧时需要等待其所依赖的前后帧都解码完成。这个等待的时间会导致实际时长的增加。



在进行推流的时候，视频会经过编码器来进行压缩编码，以减少数据量，使其更适合在网络上传输。而在拉流时，接受到的数据经过解码器来进行解码，将压缩的数据转化还原为原始的视频帧。